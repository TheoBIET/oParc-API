{"version":3,"sources":["components/App.jsx","index.js"],"names":["BASE","axios","defaults","withCredentials","App","handleLogout","setState","user","incidents","events","incidentDetails","passwordIsFalse","emailIsFalse","email","password","handleLoginForm","e","a","body","URLSearchParams","state","post","headers","results","console","log","data","getAllIncidents","getAllEvents","get","getDetails","id","onChange","target","name","value","returnIncidents","props","className","title","map","item","index","number","type","resolution_date","class","disabled","returnEvents","capacity","opening_hour","closing_hour","opened","this","role","onClick","placeholder","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.191387d6.chunk.js","sourcesContent":["import { Component } from \"react\";\nimport axios from \"axios\";\nconst BASE = \"http://localhost:3000\";\naxios.defaults.withCredentials = true;\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      user: null,\n      incidents: null,\n      incidentDetails: null,\n      passwordIsFalse: false,\n      emailIsFalse: false,\n      email: \"\",\n      password: \"\",\n    };\n  }\n\n  handleLogout = () => {\n    this.setState({\n      user: null,\n      incidents: null,\n      events: null,\n      incidentDetails: null,\n      passwordIsFalse: false,\n      emailIsFalse: false,\n      email: \"\",\n      password: \"\",\n    });\n  };\n\n  handleLoginForm = async (e) => {\n    const body = new URLSearchParams({\n      email: this.state.email,\n      password: this.state.password,\n    });\n\n    const results = await axios.post(`${BASE}/admin/login`, body, {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      withCredentials: true,\n    });\n\n    console.log(results.data);\n\n    this.setState({\n      user: results.data.data,\n      passwordIsFalse: !results.data.password,\n      emailIsFalse: !results.data.email,\n      password: \"\",\n      email: \"\",\n    });\n\n    if (this.state.user) {\n      this.getAllIncidents();\n      this.getAllEvents();\n    }\n  };\n\n  getAllIncidents = async () => {\n    const results = await axios.get(`${BASE}/api/incidents`);\n    const data = await results.data;\n    this.setState({\n      incidents: data.data,\n    });\n  };\n\n  getAllEvents = async () => {\n    const results = await axios.get(`${BASE}/api/events`);\n    const data = await results.data;\n    this.setState({\n      events: data.data,\n    });\n  };\n\n  getDetails = async (id) => {\n    const results = await axios.get(`${BASE}/api/incidents/${id}`);\n    const data = await results.data;\n    this.setState({\n      incidentDetails: data,\n    });\n  };\n\n  onChange = (e) => {\n    this.setState({\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  returnIncidents = (props) => {\n    return (\n      <div className=\"column\">\n        <h2 className=\"title is-3\">{props.title}</h2>\n        {/* Map on props data for return div class box */}\n        {props.data.map((item, index) => {\n          return (\n            <div className=\"box\" key={index}>\n              <div className=\"columns\">\n                <div className=\"column\">\n                  <h3 className=\"title is-5\">Incident n°</h3>\n                  <h3 className=\"subtitle\"># {item.number}</h3>\n                </div>\n                <div className=\"column\">\n                  <h3 className=\"title is-5\">Cause</h3>\n                  <p className=\"subtitle\">{item.type}</p>\n                </div>\n                <div className=\"column\">\n                  <h3 className=\"title is-5\">Status</h3>\n                  <p className=\"subtitle\">\n                    {item.resolution_date\n                      ? \"Résolu\"\n                      : \"En cours\"}\n                  </p>\n                </div>\n                <div className=\"column\">\n                  <h3 className=\"title is-5\">Change</h3>\n                  {item.resolution_date ? (\n                    <button class=\"button is-info\" disabled>\n                      <span class=\"icon is-small\">\n                        <i class=\"fas fa-check\"></i>\n                      </span>\n                      <span>Solved</span>\n                    </button>\n                  ) : (\n                    <button class=\"button is-success\">\n                      <span class=\"icon is-small\">\n                        <i class=\"fas fa-check\"></i>\n                      </span>\n                      <span>Close</span>\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  returnEvents = (props) => {\n    console.log(props);\n    return (\n      <div className=\"column\">\n        <h2 className=\"title is-3\">{props.title}</h2>\n        {/* Map on props data for return div class box */}\n        {props.data.map((item, index) => {\n          return (\n            <div className=\"box\" key={index}>\n              <div className=\"columns\">\n                <div className=\"column\">\n                  <h3 className=\"title is-5\">Nom</h3>\n                  <h3 className=\"subtitle\">{item.name}</h3>\n                  <h3 className=\"title is-5\">Capacité</h3>\n                  <p className=\"subtitle\">{item.capacity}</p>\n                </div>\n                <div className=\"column\">\n                  <h3 className=\"title is-5\">Hours</h3>\n                  <p className=\"subtitle\">\n                    {item.opening_hour}\n                    <br />\n                    {item.closing_hour}\n                  </p>\n                </div>\n                <div className=\"column\">\n                  <h3 className=\"title is-5\">Status</h3>\n                  <p className=\"subtitle\">\n                    {item.opened ? (\n                      <div class=\"button is-primary\">\n                        Ouvert\n                      </div>\n                    ) : (\n                      <div class=\"button is-danger\">\n                        Fermé\n                      </div>\n                    )}\n                  </p>\n                </div>\n                {item.opened && (\n                  <div className=\"column\">\n                    <h3 className=\"title is-5\">Incident</h3>\n                    <div class=\"button is-danger\">\n                      Maintenance\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  render() {\n    return (\n      <div id=\"App\">\n        {this.state.user ? (\n          <>\n            <nav\n              class=\"navbar\"\n              role=\"navigation\"\n              aria-label=\"main navigation\"\n            >\n              <div class=\"navbar-brand\">\n                <h1 class=\"navbar-item\">oParc Dashboard</h1>\n              </div>\n\n              <div class=\"navbar-end\">\n                <div className=\"navbar-item\">\n                  <p>\n                    Connecté en tant que\n                    {this.state.user.email}\n                  </p>\n                </div>\n                <div class=\"navbar-item\">\n                  <div class=\"buttons\">\n                    <div\n                      class=\"button is-danger\"\n                      onClick={this.handleLogout}\n                    >\n                      <strong>Log out</strong>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </nav>\n            <div class=\"columns\">\n              {this.state.incidents && (\n                <this.returnIncidents\n                  title=\"Liste des incidents en cours\"\n                  data={this.state.incidents}\n                />\n              )}\n              {this.state.events && (\n                <this.returnEvents\n                  title=\"Liste des attractions\"\n                  data={this.state.events}\n                />\n              )}\n            </div>\n          </>\n        ) : (\n          <div class=\"modal is-active\">\n            <div class=\"modal-background\"></div>\n            <div class=\"modal-card\">\n              <header class=\"modal-card-head\">\n                <p class=\"modal-card-title\">o'Parc Dashboard</p>\n              </header>\n              <section class=\"modal-card-body\">\n                <div class=\"field\">\n                  <label class=\"label\">E-mail</label>\n                  <p class=\"control has-icons-left has-icons-right\">\n                    <input\n                      class={\n                        this.state.emailIsFalse\n                          ? \"input is-danger\"\n                          : \"input\"\n                      }\n                      name=\"email\"\n                      type=\"email\"\n                      value={this.state.email}\n                      onChange={this.onChange}\n                      placeholder=\"john.doe@oparc.io\"\n                    />\n                    <span class=\"icon is-small is-left\">\n                      <i class=\"fas fa-envelope\"></i>\n                    </span>\n                  </p>\n                  {this.state.emailIsFalse && (\n                    <p class=\"help is-danger\">\n                      This email doesn't exist\n                    </p>\n                  )}\n                </div>\n                <div class=\"field\">\n                  <label class=\"label\">Password</label>\n                  <p class=\"control has-icons-left has-icons-right\">\n                    <input\n                      class={\n                        this.state.passwordIsFalse &&\n                          !this.state.emailIsFalse\n                          ? \"input is-danger\"\n                          : \"input\"\n                      }\n                      name=\"password\"\n                      type=\"password\"\n                      value={this.state.password}\n                      onChange={this.onChange}\n                      placeholder=\"Y0urS3cr3Tp4ssw0rd\"\n                    />\n                    <span class=\"icon is-small is-left\">\n                      <i class=\"fas fa-lock\"></i>\n                    </span>\n                  </p>\n                  {this.state.passwordIsFalse &&\n                    !this.state.emailIsFalse && (\n                      <p class=\"help is-danger\">\n                        This password is incorrect\n                      </p>\n                    )}\n                </div>\n              </section>\n              <footer class=\"modal-card-foot\">\n                <button\n                  class=\"button is-success\"\n                  onClick={this.handleLoginForm}\n                >\n                  Login\n                </button>\n              </footer>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\nimport App from './components/App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}